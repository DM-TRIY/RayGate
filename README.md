# RayGate

RayGate ‚Äî —ç—Ç–æ –æ—Å–Ω–∞—Å—Ç–∫–∞ VPN –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–æ–≤ —Å Entware/OpenWRT, –∏—Å–ø–æ–ª—å–∑—É—é—â–∞—è –ø—Ä–æ—Ç–æ–∫–æ–ª VLESS —Å –ø–æ–º–æ—â—å—é –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ xray-core.
–ü–∞–∫–µ—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å whitelist –¥–æ–º–µ–Ω–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ VPN, –ø—Ä–∏ —ç—Ç–æ–º –æ—Å—Ç–∞–ª—å–Ω–æ–π —Ç—Ä–∞—Ñ–∏–∫ –∏–¥–µ—Ç –Ω–∞–ø—Ä—è–º—É—é, —Ç–µ–º —Å–∞–º—ã–º –∏—Å–∫–ª—é—á–∞—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –≤–∫–ª—é—á–µ–Ω–∏—è/–æ—Ç–∫–ª—é—á–µ–Ω–∏—è VPN –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∑–∞–π—Ç–∏ –Ω–∞ –Ω—É–∂–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã.

–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ **–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –∏–ª–∏ **CLI-—Å–∫—Ä–∏–ø—Ç—ã**.

_–ü—Ä–æ–µ–∫—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª—Å—è –Ω–∞ —Ä–æ—É—Ç–µ—Ä–µ Keenetic Peak (aarch64), –Ω–æ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –ª—é–±—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞—Ö, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏—Ö Entware/OpenWRT._

>–ü–æ–¥—Ä–æ–±–Ω–µ–µ –∫–∞–∫ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å OPKG –Ω–∞ —Ä–æ—É—Ç–µ—Ä—ã Keenetic [–∑–¥–µ—Å—å](https://help.keenetic.com/hc/ru/articles/360000948719-OPKG).

### üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

* –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤ —á–µ—Ä–µ–∑ VLESS (xray-core).

* –ë–µ–ª—ã–µ —Å–ø–∏—Å–∫–∏ –¥–æ–º–µ–Ω–æ–≤: –≥–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ –≤–µ–± –∏–ª–∏ CLI.

* –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –¥–æ–º–µ–Ω–æ–≤ –ø–æ —Ç–µ–≥–∞–º.

* –í–µ–±-–ø–∞–Ω–µ–ª—å —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π.

* –ü—Ä–æ—Å—Ç–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ opkg.

### üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞


1.  –î–æ–±–∞–≤—å—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π RayGate –≤ opkg:

```
mkdir -p /opt/etc/opkg
echo "src/gz raygate https://raw.githubusercontent.com/DM-TRIY/RayGate/gh-pages/all/" > /opt/etc/opkg/raygate.conf
```

2. –û–±–Ω–æ–≤–∏—Ç–µ —Å–ø–∏—Å–∫–∏ –ø–∞–∫–µ—Ç–æ–≤:

``` 
opkg update 
```

3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ RayGate:

``` 
opkg install raygate 
```

4. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ:

    * –£–∫–∞–∂–∏—Ç–µ —Å—Å—ã–ª–∫—É vless://‚Ä¶, –ø–æ–ª—É—á–µ–Ω–Ω—É—é –æ—Ç —Å–≤–æ–µ–≥–æ VPN-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ - RayGate –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç—Ä–æ–∏—Ç—Å—è –ø–æ–¥ –Ω–µ—ë

    * –ó–∞–¥–∞–π—Ç–µ –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞ –≤ –≤–µ–±‚Äë–ø–∞–Ω–µ–ª—å

    * –°–µ—Ä–≤–∏—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç dnsmasq, –∑–∞–ø—É—Å—Ç–∏—Ç —Å–ª—É–∂–±—É –∏ —Å–æ–∑–¥–∞—Å—Ç –≤–µ–±‚Äë–ø–∞–Ω–µ–ª—å –Ω–∞ –ø–æ—Ä—Ç—É 9090

### üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ

``` 
opkg update && opkg upgrade raygate
```

### ‚ùå –£–¥–∞–ª–µ–Ω–∏–µ

``` 
opkg remove raygate
```

–°–µ—Ä–≤–∏—Å —Å–∞–º –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∏ –æ—á–∏—Å—Ç–∏—Ç –∑–∞ —Å–æ–±–æ–π –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã.

### üíª CLI –∫–æ–º–∞–Ω–¥—ã

* –î–æ–±–∞–≤–∏—Ç—å –¥–æ–º–µ–Ω, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –µ–≥–æ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞—Ç—å:
``` 
/opt/bin/raygate/raygate_add.sh example.com
``` 

* –£–¥–∞–ª–∏—Ç—å –¥–æ–º–µ–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é (–∏–∑ dnsmasq –∏ ipset):
``` 
/opt/bin/raygate/raygate_remove.sh example.com
``` 

* –£–¥–∞–ª–∏—Ç—å —Ü–µ–ª—É—é –≥—Ä—É–ø–ø—É –¥–æ–º–µ–Ω–æ–≤:
``` 
/opt/bin/raygate/raygate_rem.sh group:example_group
``` 

* –£–¥–∞–ª–∏—Ç—å IP –∏–∑ ipset:
``` 
ipset del vpn_domains 1.2.3.4
``` 

* –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Å–ø–∏—Å–æ–∫ –¥–æ–º–µ–Ω–æ–≤:
``` 
cat /opt/etc/dnsmasq.d/90-vpn-domains.conf
``` 

* –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Å–ø–∏—Å–æ–∫ IP –≤ ipset:
``` 
ipset list vpn_domains
``` 
